<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="annot"><span class="hs-comment">-- | Module to load and provide the Hydra scripts.</span></span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hydra.Plutus</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Hydra.Prelude</span></span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(^.)</span></span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">key</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">nth</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_String</span></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Base16</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Base16</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.FileEmbed</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">embedFile</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">makeRelativeToProject</span></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusLedgerApi.Common</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SerialisedScript</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="annot"><span class="hs-comment">-- | Loads the &quot;plutus.json&quot; blueprint and provides the decoded JSON.</span></span><span>
</span><span id="line-16"></span><span class="annot"><a href="Hydra.Plutus.html#blueprintJSON"><span class="hs-identifier hs-type">blueprintJSON</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span>
</span><span id="line-17"></span><span id="blueprintJSON"><span class="annot"><span class="annottext">blueprintJSON :: Value
</span><a href="Hydra.Plutus.html#blueprintJSON"><span class="hs-identifier hs-var hs-var">blueprintJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe Value
forall a. FromJSON a =&gt; ByteString -&gt; Maybe a
</span><span class="hs-identifier hs-var">Aeson.decodeStrict</span></span><span> </span><span class="hs-special">$</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">makeRelativeToProject</span></span><span> </span><span class="annot"><span class="hs-string">&quot;./plutus.json&quot;</span></span><span> </span><span class="annot"><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-type">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">embedFile</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
forall a t. (HasCallStack, IsText t) =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Invalid blueprint: plutus.json&quot;</span></span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679468305"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679468305"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679468305"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="annot"><span class="hs-comment">-- | Access the commit validator script from the 'blueprintJSON'.</span></span><span>
</span><span id="line-23"></span><span class="annot"><a href="Hydra.Plutus.html#commitValidatorScript"><span class="hs-identifier hs-type">commitValidatorScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SerialisedScript</span></span><span>
</span><span id="line-24"></span><span id="commitValidatorScript"><span class="annot"><span class="annottext">commitValidatorScript :: SerialisedScript
</span><a href="Hydra.Plutus.html#commitValidatorScript"><span class="hs-identifier hs-var hs-var">commitValidatorScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String ByteString
</span><span class="hs-identifier hs-var">Base16.decode</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679468308"><span class="hs-identifier hs-var">base16Bytes</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679468309"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679468309"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; SerialisedScript
forall a t. (HasCallStack, IsText t) =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; SerialisedScript) -&gt; Text -&gt; SerialisedScript
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Failed to decode commit validator: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679468309"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679468311"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679468311"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; SerialisedScript
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/bytestring-0.11.5.3/src/Data.ByteString.Short.Internal.html#toShort"><span class="hs-identifier hs-var">toShort</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679468311"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-28"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-29"></span><span>  </span><span id="local-6989586621679468308"><span class="annot"><span class="annottext">base16Bytes :: ByteString
</span><a href="#local-6989586621679468308"><span class="hs-identifier hs-var hs-var">base16Bytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
forall a b. ConvertUtf8 a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679468316"><span class="hs-identifier hs-var">base16Text</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-comment">-- NOTE: we are using a hardcoded index to access the commit validator.</span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-comment">-- This is fragile and will raise problems when we move another plutus validator</span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-comment">-- to Aiken.</span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-comment">-- Reference: https://github.com/cardano-foundation/CIPs/tree/master/CIP-0057</span><span>
</span><span id="line-34"></span><span>  </span><span id="local-6989586621679468316"><span class="annot"><span class="annottext">base16Text :: Text
</span><a href="#local-6989586621679468316"><span class="hs-identifier hs-var hs-var">base16Text</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="Hydra.Plutus.html#blueprintJSON"><span class="hs-identifier hs-var">blueprintJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Getting Text Value Text -&gt; Text
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value Value
forall t. AsValue t =&gt; Key -&gt; Traversal' t Value
</span><span class="hs-identifier hs-var">key</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;validators&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Value -&gt; Const Text Value) -&gt; Value -&gt; Const Text Value)
-&gt; Getting Text Value Text -&gt; Getting Text Value Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Traversal' Value Value
forall t. AsValue t =&gt; Int -&gt; Traversal' t Value
</span><span class="hs-identifier hs-var">nth</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">((Value -&gt; Const Text Value) -&gt; Value -&gt; Const Text Value)
-&gt; Getting Text Value Text -&gt; Getting Text Value Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value Value
forall t. AsValue t =&gt; Key -&gt; Traversal' t Value
</span><span class="hs-identifier hs-var">key</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;compiledCode&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Value -&gt; Const Text Value) -&gt; Value -&gt; Const Text Value)
-&gt; Getting Text Value Text -&gt; Getting Text Value Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Text Value Text
forall t. AsValue t =&gt; Prism' t Text
Prism' Value Text
</span><span class="hs-identifier hs-var">_String</span></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="annot"><span class="hs-comment">-- | Access the initial validator script from the 'blueprintJSON'.</span></span><span>
</span><span id="line-37"></span><span class="annot"><a href="Hydra.Plutus.html#initialValidatorScript"><span class="hs-identifier hs-type">initialValidatorScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SerialisedScript</span></span><span>
</span><span id="line-38"></span><span id="initialValidatorScript"><span class="annot"><span class="annottext">initialValidatorScript :: SerialisedScript
</span><a href="Hydra.Plutus.html#initialValidatorScript"><span class="hs-identifier hs-var hs-var">initialValidatorScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String ByteString
</span><span class="hs-identifier hs-var">Base16.decode</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679468336"><span class="hs-identifier hs-var">base16Bytes</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679468337"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679468337"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; SerialisedScript
forall a t. (HasCallStack, IsText t) =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; SerialisedScript) -&gt; Text -&gt; SerialisedScript
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Failed to decode initial validator: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
forall b a. (Show a, IsString b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679468337"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679468338"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679468338"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; SerialisedScript
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/bytestring-0.11.5.3/src/Data.ByteString.Short.Internal.html#toShort"><span class="hs-identifier hs-var">toShort</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679468338"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-42"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-43"></span><span>  </span><span id="local-6989586621679468336"><span class="annot"><span class="annottext">base16Bytes :: ByteString
</span><a href="#local-6989586621679468336"><span class="hs-identifier hs-var hs-var">base16Bytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
forall a b. ConvertUtf8 a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679468340"><span class="hs-identifier hs-var">base16Text</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-comment">-- NOTE: we are using a hardcoded index to access the commit validator.</span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-comment">-- This is fragile and will raise problems when we move another plutus validator</span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-comment">-- to Aiken.</span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-comment">-- Reference: https://github.com/cardano-foundation/CIPs/tree/master/CIP-0057</span><span>
</span><span id="line-49"></span><span>  </span><span id="local-6989586621679468340"><span class="annot"><span class="annottext">base16Text :: Text
</span><a href="#local-6989586621679468340"><span class="hs-identifier hs-var hs-var">base16Text</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="Hydra.Plutus.html#blueprintJSON"><span class="hs-identifier hs-var">blueprintJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Getting Text Value Text -&gt; Text
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value Value
forall t. AsValue t =&gt; Key -&gt; Traversal' t Value
</span><span class="hs-identifier hs-var">key</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;validators&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Value -&gt; Const Text Value) -&gt; Value -&gt; Const Text Value)
-&gt; Getting Text Value Text -&gt; Getting Text Value Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Traversal' Value Value
forall t. AsValue t =&gt; Int -&gt; Traversal' t Value
</span><span class="hs-identifier hs-var">nth</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">((Value -&gt; Const Text Value) -&gt; Value -&gt; Const Text Value)
-&gt; Getting Text Value Text -&gt; Getting Text Value Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value Value
forall t. AsValue t =&gt; Key -&gt; Traversal' t Value
</span><span class="hs-identifier hs-var">key</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;compiledCode&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Value -&gt; Const Text Value) -&gt; Value -&gt; Const Text Value)
-&gt; Getting Text Value Text -&gt; Getting Text Value Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/6b4grlnsja5lm7704cn0yw3ljjvzk909-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Text Value Text
forall t. AsValue t =&gt; Prism' t Text
Prism' Value Text
</span><span class="hs-identifier hs-var">_String</span></span><span>
</span><span id="line-50"></span></pre></body></html>